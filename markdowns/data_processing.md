# 데이터의 처리와 계산



## 개요

빅인은 보고서에서 조회할 수 있는 수집된 데이터를 연산할 수 있도록 합니다. 측정 수준(계산의 기준)에 따라 이벤트를 계산하여 측정항목의 기술통계 보고서를 조회할 수 있습니다. 지원하는 계산은 측정 수준 또는 측정항목의 수집 위치, 수준, 값 등에 따라 지원되는 계산이 달라집니다.

빅인 보고서에서 조회할 수 있는 기본 측정항목입니다. 측정항목은 기술통계 연산이 가능하며, 측정되는 단위와 수준에 따라 지원되는 계산이 달라집니다.



### 합계

합계는 수집된 데이터의 집계입니다. 측정수준과 관계없이 기간 내 수집된 데이터의 수를 집계합니다.



### 평균

기간 내 수집된 데이터의 평균값으로 계산은 측정수준의 영향을 받습니다. `수집 데이터의 집계 / 측정 수준의 집계(세션 또는 사용자) ` 로 `전체 세션수` 또는 `전체 사용자수` 를 평균의 분모로 계산합니다.

**사용자 1**

| 날짜              | 방문 ID | 방문 | 이탈 | 머문 시간 |
| ----------------- | ------- | ---- | ---- | --------- |
| 2019. 4. 17 14:56 | A       | 1    | 0    | 00:05:25  |
| 2019. 4. 18 15:36 | B       | 1    | 1    | 00:02:57  |
| 2019. 4. 18 17:23 | C       | 1    | 1    | 00:01:33  |
| 2019. 4. 19 12:55 | D       | 1    | 1    | 00:02:05  |

**사용자 2**

| 날짜              | 방문 ID | 방문 | 이탈 | 머문 시간 |
| ----------------- | ------- | ---- | ---- | --------- |
| 2019. 4. 17 14:11 | E       | 1    | 0    | 00:04:55  |
| 2019. 4. 18 09:53 | F       | 1    | 1    | 00:00:23  |
| 2019. 4. 19 13:52 | H       | 1    | 1    | 00:02:05  |



측정수준에 따라 평균 방문수는 아래와 같은 값을 계산합니다.

> 사용자 수준의 평균 방문수 : 3.5 (전체 방문수/전체 사용자수)
>
> 세션 수준의 평균 방문수  : 1 (전체 방문수/전체 방문수) 이므로 계산하지 않음.





### 고유값

고유한 속성으로 구분한 개수입니다. 고유값은 1이상의 무한한 값으로 측정되는 측정항목은 고유한 속성을 정의할 수 없으므로 계산을 지원하지 않습니다. 상품 또는 페이지 콘텐츠와 같이 고유한 값으로 정의할 수 있는 경우 고유값을 계산합니다.

* 방문수 및 이탈수는 고유한 방문의 정의 기준이 이해하기에 따라 다르므로 정의할 수 없습니다.
* 머문 시간 및 스크롤 높이 등 값이 1보다 큰 값의 이벤트의 경우에도 여러 값 중 고유한 값을 정의할 수 없으므로 계산을 지원하지 않습니다.



### 최소값과 최대값, 중앙값

최소값, 최대값 그리고 중앙값은 집계된 이벤트 중에서 연산에 맞는 하나의 값을 찾습니다. 측정수준에 따라 이벤트가 집계되며, 위의 연산을 실행하기 위해서는 동일한 이벤트의 이름으로 수집되어야 합니다.

* 최소값은 기간 내에 이벤트 집계 중 가장 작은 값입니다.
* 최대값은 기간 내에 이벤트 집계 중 가장 큰 값입니다.
* 중앙값은 기간 내에 이벤트 집계 중 중앙에 있는 중간값입니다.





## 데이터의 처리 및 측정수준

측정항목을 측정하는 대상과 계산의 측정수준이 같은 경우에 합계 이외의 값은 1을 가집니다. 

세션 수준에서 이탈수의 고유값,최소값,중앙값,최대값 등  이탈과 방문은 방문 단위를 세거나, 이탈여부를 구분하는 바이너리 타입(0 또는 1의 값)의 데이터 유형이므로, 고유값, 최소값,중앙값 등 특정한 값을 정의할 수 없습니다. 



방문수, 이탈수 > 세션 수준에서 방문 측정항목을 계산하는 경우 이벤트 단위의 수집이므로, 방문수/방문수가 됩니다. 아래의 세션 측정 수준에 의한 방문 측정항목 계산 예시를 참고하세요.



**세션 측정 수준에서 방문수 계산**

| 날짜              | 방문 ID | 방문 | 이탈 | 머문 시간 |
| ----------------- | ------- | ---- | ---- | --------- |
| 2019. 4. 17 14:56 | A       | 1    | 0    | 00:05:25  |
| 2019. 4. 18 15:36 | B       | 1    | 1    | 00:02:57  |
| 2019. 4. 18 17:23 | C       | 1    | 1    | 00:01:33  |
| 2019. 4. 19 12:55 | D       | 1    | 1    | 00:02:05  |

위의 예시와 같이 한 사용자의 방문 데이터가 있습니다. 위의 데이터의 `방문수`와 `이탈수`는 아래와 같이 계산이 되어 보고서로 전송합니다.

| 계산   | 방문수 | 이탈수 |
| ------ | ------ | ------ |
| 합계   | 4      | 3      |
| 평균   | 1      | 0.75   |
| 고유값 | 1      | 1      |
| 최소값 | 1      | 1      |
| 중앙값 | 1      | 1      |
| 최대값 | 1      | 1      |

방문의 평균을 방문 수준에서 계산한다면 수식은 `전체 방문수/전체 방문수` 가 되므로 값이 1을 갖게 됩니다. 



**세션 측정 수준에서 머문 시간 계산**

방문 측정항목에서 1이상의 정량적인 요소를 측정할 수 있는 경우(예:머문 시간)에는 여러 방문 중 고유값으로 가져야 할 값이 없기 때문에 고유값의 계산을 지원하지 않습니다.

위의 방문 데이터를 통해 계산한 `머문 시간`의 계산 결과입니다.

| 계산   | 머문 시간 |
| ------ | --------- |
| 합계   | 00:12:00  |
| 평균   | 00:03:00  |
| 고유값 | -         |
| 최소값 | 00:01:33  |
| 중앙값 | 00:02:05  |
| 최대값 | 00:05:25  |



## 데이터의 계산과 통제

빅인은 계산을 할 수 없거나 값이 동일한 계산을 통제하기 위하여 각 측정항목마다 측정 수준에서 계산가능한 연산자를 정의하고 있습니다. 



아래의 표는 세션 측정수준에서 계산할 수 있는 측정항목 입니다.

| 측정항목             | 합계 | 평균 | 고유값 | 최소값 | 중앙값 | 최대값 |
| -------------------- | ---- | ---- | ------ | ------ | ------ | ------ |
| 방문수               | O    | X    | X      | X      | X      | X      |
| 이탈수               | O    | O    | X      | X      | X      | X      |
| 머문 시간            | O    | O    | X      | O      | O      | O      |
| 페이지 조회          | O    | O    | O      | O      | O      | O      |
| 페이지 스크롤 높이   | O    | O    | X      | O      | O      | O      |
| 페이지에 머문 시간   | O    | O    | X      | O      | O      | O      |
| 체크아웃 페이지 조회 | O    | O    | O      | O      | O      | O      |
| 체크아웃 단계 수량   | O    | O    | O      | O      | O      | O      |
| 장바구니 페이지 조회 | O    | O    | O      | O      | O      | O      |
| 장바구니에 담은 수량 | O    | O    | O      | O      | O      | O      |
| 상품 세부정보 조회   | O    | O    | O      | O      | O      | O      |
| 거래수               | O    | O    | O      | O      | O      | O      |
| 수익                 | O    | O    | X      | O      | O      | O      |
| 상품 수량            | O    | O    | O      | O      | O      | O      |
| 환불 금액            | O    | O    | X      | O      | O      | O      |
| 배송비               | O    | O    | X      | O      | O      | O      |
| 세금                 | O    | O    | X      | O      | O      | O      |
| 리뷰                 | O    | O    | O      | O      | O      | O      |

방문수는 방문에 의해 집계되는 값이 1이므로, 세션 측정수준에서는 계산을 할 수 없습니다. 사용자 측정수준에서 계산할 경우 사용자의 고유 ID에 의해 값이 1보다 큰 값으로 집계되어 사용자당 평균 방문수를 계산할 수 있습니다.

| 측정항목             | 합계 | 평균 | 고유값 | 최소값 | 중앙값 | 최대값 |
| -------------------- | ---- | ---- | ------ | ------ | ------ | ------ |
| 방문수               | O    | O    | X      | X      | X      | X      |
| 이탈수               | O    | O    | X      | X      | X      | X      |
| 머문 시간            | O    | O    | X      | O      | O      | O      |
| 페이지 조회          | O    | O    | O      | O      | O      | O      |
| 페이지 스크롤 높이   | O    | O    | X      | O      | O      | O      |
| 페이지에 머문 시간   | O    | O    | X      | O      | O      | O      |
| 체크아웃 페이지 조회 | O    | O    | O      | O      | O      | O      |
| 체크아웃 단계 수량   | O    | O    | O      | O      | O      | O      |
| 장바구니 페이지 조회 | O    | O    | O      | O      | O      | O      |
| 장바구니에 담은 수량 | O    | O    | O      | O      | O      | O      |
| 상품 세부정보 조회   | O    | O    | O      | O      | O      | O      |
| 거래수               | O    | O    | O      | O      | O      | O      |
| 수익                 | O    | O    | X      | O      | O      | O      |
| 상품 수량            | O    | O    | O      | O      | O      | O      |
| 환불 금액            | O    | O    | X      | O      | O      | O      |
| 배송비               | O    | O    | X      | O      | O      | O      |
| 세금                 | O    | O    | X      | O      | O      | O      |
| 리뷰                 | O    | O    | O      | O      | O      | O      |

측정항목의 정의에 대해 궁금하시다면, [여기](#)를 통해 자세히 알아보세요.